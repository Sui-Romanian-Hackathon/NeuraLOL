{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\bianca\\\\OneDrive\\\\Desktop\\\\node\\\\Priv\\\\my-trash-app\\\\src\\\\components\\\\Balance.jsx\",\n  _s = $RefreshSig$();\n// src/components/Balance.jsx\nimport { Box, Typography, CircularProgress, Button } from \"@mui/material\";\nimport { useWalletKit } from \"@mysten/wallet-kit\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { client } from \"../services/suiClient\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Balance() {\n  _s();\n  var _currentWallet$accoun, _currentWallet$accoun2, _currentWallet$accoun5, _currentWallet$accoun6, _data$toFixed;\n  const {\n    currentWallet,\n    isConnected\n  } = useWalletKit(); // ← AICI e cheia!!!\n\n  const {\n    data,\n    isLoading,\n    error,\n    refetch\n  } = useQuery({\n    queryKey: [\"balance\", currentWallet === null || currentWallet === void 0 ? void 0 : (_currentWallet$accoun = currentWallet.accounts) === null || _currentWallet$accoun === void 0 ? void 0 : (_currentWallet$accoun2 = _currentWallet$accoun[0]) === null || _currentWallet$accoun2 === void 0 ? void 0 : _currentWallet$accoun2.address],\n    queryFn: async () => {\n      var _currentWallet$accoun3, _currentWallet$accoun4;\n      const address = currentWallet === null || currentWallet === void 0 ? void 0 : (_currentWallet$accoun3 = currentWallet.accounts) === null || _currentWallet$accoun3 === void 0 ? void 0 : (_currentWallet$accoun4 = _currentWallet$accoun3[0]) === null || _currentWallet$accoun4 === void 0 ? void 0 : _currentWallet$accoun4.address;\n      if (!address) throw new Error(\"No address found\");\n      console.log(\"Citeste sold pentru adresa:\", address); // debug\n      const res = await client.getBalance({\n        owner: address,\n        coinType: \"0x2::sui::SUI\"\n      });\n      console.log(\"Raw balance:\", res);\n      return Number(res.totalBalance) / 1000000000;\n    },\n    enabled: isConnected && !!(currentWallet !== null && currentWallet !== void 0 && (_currentWallet$accoun5 = currentWallet.accounts) !== null && _currentWallet$accoun5 !== void 0 && (_currentWallet$accoun6 = _currentWallet$accoun5[0]) !== null && _currentWallet$accoun6 !== void 0 && _currentWallet$accoun6.address),\n    // ← așteaptă adresa reală\n    retry: 3,\n    refetchInterval: 8000\n  });\n  if (!isConnected) {\n    return /*#__PURE__*/_jsxDEV(Typography, {\n      children: \"Conecteaz\\u0103 wallet-ul\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 12\n    }, this);\n  }\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        textAlign: \"center\",\n        py: 8\n      },\n      children: [/*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        children: \"Se \\xEEncarc\\u0103 soldul...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        textAlign: \"center\",\n        py: 8\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        color: \"error\",\n        children: [\"Eroare: \", error.message]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => refetch(),\n        variant: \"outlined\",\n        sx: {\n          mt: 2\n        },\n        children: \"Re\\xEEncearc\\u0103\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      textAlign: \"center\",\n      py: 8\n    },\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h5\",\n      color: \"text.secondary\",\n      gutterBottom: true,\n      children: \"Sold curent (Testnet)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h1\",\n      color: \"primary\",\n      sx: {\n        fontWeight: \"bold\"\n      },\n      children: [(_data$toFixed = data === null || data === void 0 ? void 0 : data.toFixed(6)) !== null && _data$toFixed !== void 0 ? _data$toFixed : \"0.000000\", \" SUI\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      onClick: () => refetch(),\n      variant: \"outlined\",\n      sx: {\n        mt: 3\n      },\n      children: \"Refresh\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n}\n_s(Balance, \"Nv7iSoSHuG3Zs3HQSjx0qHA3BPs=\", false, function () {\n  return [useWalletKit, useQuery];\n});\n_c = Balance;\nvar _c;\n$RefreshReg$(_c, \"Balance\");","map":{"version":3,"names":["Box","Typography","CircularProgress","Button","useWalletKit","useQuery","client","jsxDEV","_jsxDEV","Balance","_s","_currentWallet$accoun","_currentWallet$accoun2","_currentWallet$accoun5","_currentWallet$accoun6","_data$toFixed","currentWallet","isConnected","data","isLoading","error","refetch","queryKey","accounts","address","queryFn","_currentWallet$accoun3","_currentWallet$accoun4","Error","console","log","res","getBalance","owner","coinType","Number","totalBalance","enabled","retry","refetchInterval","children","fileName","_jsxFileName","lineNumber","columnNumber","sx","textAlign","py","color","message","onClick","variant","mt","gutterBottom","fontWeight","toFixed","_c","$RefreshReg$"],"sources":["C:/Users/bianca/OneDrive/Desktop/node/Priv/my-trash-app/src/components/Balance.jsx"],"sourcesContent":["// src/components/Balance.jsx\r\nimport { Box, Typography, CircularProgress, Button } from \"@mui/material\";\r\nimport { useWalletKit } from \"@mysten/wallet-kit\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { client } from \"../services/suiClient\";\r\n\r\nexport default function Balance() {\r\n  const { currentWallet, isConnected } = useWalletKit(); // ← AICI e cheia!!!\r\n\r\n  const { data, isLoading, error, refetch } = useQuery({\r\n    queryKey: [\"balance\", currentWallet?.accounts?.[0]?.address],\r\n    queryFn: async () => {\r\n      const address = currentWallet?.accounts?.[0]?.address;\r\n      if (!address) throw new Error(\"No address found\");\r\n\r\n      console.log(\"Citeste sold pentru adresa:\", address); // debug\r\n      const res = await client.getBalance({\r\n        owner: address,\r\n        coinType: \"0x2::sui::SUI\",\r\n      });\r\n      console.log(\"Raw balance:\", res);\r\n      return Number(res.totalBalance) / 1_000_000_000;\r\n    },\r\n    enabled: isConnected && !!currentWallet?.accounts?.[0]?.address, // ← așteaptă adresa reală\r\n    retry: 3,\r\n    refetchInterval: 8000,\r\n  });\r\n\r\n  if (!isConnected) {\r\n    return <Typography>Conectează wallet-ul</Typography>;\r\n  }\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <Box sx={{ textAlign: \"center\", py: 8 }}>\r\n        <CircularProgress />\r\n        <Typography>Se încarcă soldul...</Typography>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Box sx={{ textAlign: \"center\", py: 8 }}>\r\n        <Typography color=\"error\">Eroare: {error.message}</Typography>\r\n        <Button onClick={() => refetch()} variant=\"outlined\" sx={{ mt: 2 }}>\r\n          Reîncearcă\r\n        </Button>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Box sx={{ textAlign: \"center\", py: 8 }}>\r\n      <Typography variant=\"h5\" color=\"text.secondary\" gutterBottom>\r\n        Sold curent (Testnet)\r\n      </Typography>\r\n      <Typography variant=\"h1\" color=\"primary\" sx={{ fontWeight: \"bold\" }}>\r\n        {data?.toFixed(6) ?? \"0.000000\"} SUI\r\n      </Typography>\r\n      <Button onClick={() => refetch()} variant=\"outlined\" sx={{ mt: 3 }}>\r\n        Refresh\r\n      </Button>\r\n    </Box>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}