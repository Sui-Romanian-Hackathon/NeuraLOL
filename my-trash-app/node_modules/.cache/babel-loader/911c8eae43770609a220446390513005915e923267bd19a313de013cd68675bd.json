{"ast":null,"code":"var _jsxFileName = \"/Users/joitafabian/Documents/Kack/Priv/my-trash-app/src/components/Balance.jsx\",\n  _s = $RefreshSig$();\nimport { Box, Typography, CircularProgress } from \"@mui/material\";\nimport { useWalletKit } from \"@mysten/wallet-kit\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Balance() {\n  _s();\n  var _currentWallet$accoun, _currentWallet$accoun2;\n  const {\n    currentWallet,\n    isConnected\n  } = useWalletKit();\n\n  // Slush Wallet Fix\n  const address = currentWallet === null || currentWallet === void 0 ? void 0 : (_currentWallet$accoun = currentWallet.accounts) === null || _currentWallet$accoun === void 0 ? void 0 : (_currentWallet$accoun2 = _currentWallet$accoun[0]) === null || _currentWallet$accoun2 === void 0 ? void 0 : _currentWallet$accoun2.address;\n  const {\n    data: balance,\n    isLoading,\n    error\n  } = useQuery({\n    queryKey: [\"balance\", address],\n    queryFn: async () => {\n      if (!address) return 0;\n      const response = await fetch(\"https://fullnode.testnet.sui.io:443\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          jsonrpc: \"2.0\",\n          id: 1,\n          method: \"suix_getBalance\",\n          params: [address, \"0x2::sui::SUI\"] // SUI principal\n        })\n      });\n      const result = await response.json();\n      if (result.error) throw new Error(result.error.message);\n      return Number(result.result.totalBalance) / 1e9; // în SUI\n    },\n    enabled: isConnected && !!address,\n    retry: 3,\n    refetchInterval: 8000 // refresh automats\n  });\n  if (!isConnected || !address) {\n    return /*#__PURE__*/_jsxDEV(Typography, {\n      children: \"Conecteaz\\u0103 wallet-ul pentru a vedea balan\\u021Ba.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this);\n  }\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        textAlign: \"center\",\n        py: 6\n      },\n      children: [/*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        sx: {\n          mt: 2\n        },\n        children: \"\\xCEnc\\u0103rc\\u0103m balan\\u021Ba...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(Typography, {\n      color: \"error\",\n      children: [\"Eroare: \", error.message]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      p: 2,\n      bgcolor: \"#f5f5f5\",\n      borderRadius: 2\n    },\n    children: /*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h5\",\n      fontWeight: \"bold\",\n      children: [\"Balan\\u021B\\u0103: \", balance.toFixed(3), \" SUI\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n}\n_s(Balance, \"mU6vo8ikFvdDRn20crNT2vMyQZ8=\", false, function () {\n  return [useWalletKit, useQuery];\n});\n_c = Balance;\nvar _c;\n$RefreshReg$(_c, \"Balance\");","map":{"version":3,"names":["Box","Typography","CircularProgress","useWalletKit","useQuery","jsxDEV","_jsxDEV","Balance","_s","_currentWallet$accoun","_currentWallet$accoun2","currentWallet","isConnected","address","accounts","data","balance","isLoading","error","queryKey","queryFn","response","fetch","method","headers","body","JSON","stringify","jsonrpc","id","params","result","json","Error","message","Number","totalBalance","enabled","retry","refetchInterval","children","fileName","_jsxFileName","lineNumber","columnNumber","sx","textAlign","py","mt","color","p","bgcolor","borderRadius","variant","fontWeight","toFixed","_c","$RefreshReg$"],"sources":["/Users/joitafabian/Documents/Kack/Priv/my-trash-app/src/components/Balance.jsx"],"sourcesContent":["import { Box, Typography, CircularProgress } from \"@mui/material\";\nimport { useWalletKit } from \"@mysten/wallet-kit\";\nimport { useQuery } from \"@tanstack/react-query\";\n\nexport default function Balance() {\n  const { currentWallet, isConnected } = useWalletKit();\n\n  // Slush Wallet Fix\n  const address = currentWallet?.accounts?.[0]?.address;\n\n  const {\n    data: balance,\n    isLoading,\n    error,\n  } = useQuery({\n    queryKey: [\"balance\", address],\n    queryFn: async () => {\n      if (!address) return 0;\n\n      const response = await fetch(\"https://fullnode.testnet.sui.io:443\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          jsonrpc: \"2.0\",\n          id: 1,\n          method: \"suix_getBalance\",\n          params: [address, \"0x2::sui::SUI\"], // SUI principal\n        }),\n      });\n\n      const result = await response.json();\n\n      if (result.error) throw new Error(result.error.message);\n\n      return Number(result.result.totalBalance) / 1e9; // în SUI\n    },\n    enabled: isConnected && !!address,\n    retry: 3,\n    refetchInterval: 8000, // refresh automats\n  });\n\n  if (!isConnected || !address) {\n    return (\n      <Typography>Conectează wallet-ul pentru a vedea balanța.</Typography>\n    );\n  }\n\n  if (isLoading) {\n    return (\n      <Box sx={{ textAlign: \"center\", py: 6 }}>\n        <CircularProgress />\n        <Typography sx={{ mt: 2 }}>Încărcăm balanța...</Typography>\n      </Box>\n    );\n  }\n\n  if (error) {\n    return <Typography color=\"error\">Eroare: {error.message}</Typography>;\n  }\n\n  return (\n    <Box sx={{ p: 2, bgcolor: \"#f5f5f5\", borderRadius: 2 }}>\n      <Typography variant=\"h5\" fontWeight=\"bold\">\n        Balanță: {balance.toFixed(3)} SUI\n      </Typography>\n    </Box>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}