{"ast":null,"code":"var __typeError = msg => {\n  throw TypeError(msg);\n};\nvar __accessCheck = (obj, member, msg) => member.has(obj) || __typeError(\"Cannot \" + msg);\nvar __privateGet = (obj, member, getter) => (__accessCheck(obj, member, \"read from private field\"), getter ? getter.call(obj) : member.get(obj));\nvar __privateAdd = (obj, member, value) => member.has(obj) ? __typeError(\"Cannot add the same private member more than once\") : member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\nvar __privateSet = (obj, member, value, setter) => (__accessCheck(obj, member, \"write to private field\"), setter ? setter.call(obj, value) : member.set(obj, value), value);\nvar _prefix, _cache;\nconst _ClientCache = class _ClientCache {\n  constructor({\n    prefix,\n    cache\n  } = {}) {\n    __privateAdd(this, _prefix);\n    __privateAdd(this, _cache);\n    __privateSet(this, _prefix, prefix ?? []);\n    __privateSet(this, _cache, cache ?? /* @__PURE__ */new Map());\n  }\n  read(key, load) {\n    const cacheKey = [__privateGet(this, _prefix), ...key].join(\":\");\n    if (__privateGet(this, _cache).has(cacheKey)) {\n      return __privateGet(this, _cache).get(cacheKey);\n    }\n    const result = load();\n    __privateGet(this, _cache).set(cacheKey, result);\n    if (typeof result === \"object\" && result !== null && \"then\" in result) {\n      return Promise.resolve(result).then(v => {\n        __privateGet(this, _cache).set(cacheKey, v);\n        return v;\n      }).catch(err => {\n        __privateGet(this, _cache).delete(cacheKey);\n        throw err;\n      });\n    }\n    return result;\n  }\n  readSync(key, load) {\n    const cacheKey = [__privateGet(this, _prefix), ...key].join(\":\");\n    if (__privateGet(this, _cache).has(cacheKey)) {\n      return __privateGet(this, _cache).get(cacheKey);\n    }\n    const result = load();\n    __privateGet(this, _cache).set(cacheKey, result);\n    return result;\n  }\n  clear(prefix) {\n    const prefixKey = [...__privateGet(this, _prefix), ...(prefix ?? [])].join(\":\");\n    if (!prefixKey) {\n      __privateGet(this, _cache).clear();\n      return;\n    }\n    for (const key of __privateGet(this, _cache).keys()) {\n      if (key.startsWith(prefixKey)) {\n        __privateGet(this, _cache).delete(key);\n      }\n    }\n  }\n  scope(prefix) {\n    return new _ClientCache({\n      prefix: [...__privateGet(this, _prefix), ...(Array.isArray(prefix) ? prefix : [prefix])],\n      cache: __privateGet(this, _cache)\n    });\n  }\n};\n_prefix = new WeakMap();\n_cache = new WeakMap();\nlet ClientCache = _ClientCache;\nexport { ClientCache };","map":{"version":3,"names":["_prefix","_cache","_ClientCache","constructor","prefix","cache","__privateAdd","__privateSet","Map","read","key","load","cacheKey","__privateGet","join","has","get","result","set","Promise","resolve","then","v","catch","err","delete","readSync","clear","prefixKey","keys","startsWith","scope","Array","isArray","WeakMap","ClientCache"],"sources":["/Users/joitafabian/Documents/Hackathon/my-trash-app/node_modules/@mysten/sui/src/experimental/cache.ts"],"sourcesContent":["// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nexport interface ClientCacheOptions {\n\tprefix?: string[];\n\tcache?: Map<string, unknown>;\n}\n\nexport class ClientCache {\n\t#prefix: string[];\n\t#cache: Map<string, unknown>;\n\n\tconstructor({ prefix, cache }: ClientCacheOptions = {}) {\n\t\tthis.#prefix = prefix ?? [];\n\t\tthis.#cache = cache ?? new Map();\n\t}\n\n\tread<T>(key: [string, ...string[]], load: () => T | Promise<T>): T | Promise<T> {\n\t\tconst cacheKey = [this.#prefix, ...key].join(':');\n\n\t\tif (this.#cache.has(cacheKey)) {\n\t\t\treturn this.#cache.get(cacheKey) as T;\n\t\t}\n\n\t\tconst result = load();\n\n\t\tthis.#cache.set(cacheKey, result);\n\n\t\tif (typeof result === 'object' && result !== null && 'then' in result) {\n\t\t\treturn Promise.resolve(result)\n\t\t\t\t.then((v) => {\n\t\t\t\t\tthis.#cache.set(cacheKey, v);\n\t\t\t\t\treturn v as T;\n\t\t\t\t})\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tthis.#cache.delete(cacheKey);\n\t\t\t\t\tthrow err;\n\t\t\t\t});\n\t\t}\n\n\t\treturn result as T;\n\t}\n\n\treadSync<T>(key: [string, ...string[]], load: () => T): T {\n\t\tconst cacheKey = [this.#prefix, ...key].join(':');\n\n\t\tif (this.#cache.has(cacheKey)) {\n\t\t\treturn this.#cache.get(cacheKey) as T;\n\t\t}\n\n\t\tconst result = load();\n\n\t\tthis.#cache.set(cacheKey, result);\n\n\t\treturn result as T;\n\t}\n\n\tclear(prefix?: string[]) {\n\t\tconst prefixKey = [...this.#prefix, ...(prefix ?? [])].join(':');\n\t\tif (!prefixKey) {\n\t\t\tthis.#cache.clear();\n\t\t\treturn;\n\t\t}\n\n\t\tfor (const key of this.#cache.keys()) {\n\t\t\tif (key.startsWith(prefixKey)) {\n\t\t\t\tthis.#cache.delete(key);\n\t\t\t}\n\t\t}\n\t}\n\n\tscope(prefix: string | string[]) {\n\t\treturn new ClientCache({\n\t\t\tprefix: [...this.#prefix, ...(Array.isArray(prefix) ? prefix : [prefix])],\n\t\t\tcache: this.#cache,\n\t\t});\n\t}\n}\n"],"mappings":";;;;;;;AAAA,IAAAA,OAAA,EAAAC,MAAA;AAQO,MAAMC,YAAA,GAAN,MAAMA,YAAA,CAAY;EAIxBC,YAAY;IAAEC,MAAA;IAAQC;EAAM,IAAwB,CAAC,GAAG;IAHxDC,YAAA,OAAAN,OAAA;IACAM,YAAA,OAAAL,MAAA;IAGCM,YAAA,OAAKP,OAAA,EAAUI,MAAA,IAAU,EAAC;IAC1BG,YAAA,OAAKN,MAAA,EAASI,KAAA,IAAS,mBAAIG,GAAA,CAAI;EAChC;EAEAC,KAAQC,GAAA,EAA4BC,IAAA,EAA4C;IAC/E,MAAMC,QAAA,GAAW,CAACC,YAAA,OAAKb,OAAA,GAAS,GAAGU,GAAG,EAAEI,IAAA,CAAK,GAAG;IAEhD,IAAID,YAAA,OAAKZ,MAAA,EAAOc,GAAA,CAAIH,QAAQ,GAAG;MAC9B,OAAOC,YAAA,OAAKZ,MAAA,EAAOe,GAAA,CAAIJ,QAAQ;IAChC;IAEA,MAAMK,MAAA,GAASN,IAAA,CAAK;IAEpBE,YAAA,OAAKZ,MAAA,EAAOiB,GAAA,CAAIN,QAAA,EAAUK,MAAM;IAEhC,IAAI,OAAOA,MAAA,KAAW,YAAYA,MAAA,KAAW,QAAQ,UAAUA,MAAA,EAAQ;MACtE,OAAOE,OAAA,CAAQC,OAAA,CAAQH,MAAM,EAC3BI,IAAA,CAAMC,CAAA,IAAM;QACZT,YAAA,OAAKZ,MAAA,EAAOiB,GAAA,CAAIN,QAAA,EAAUU,CAAC;QAC3B,OAAOA,CAAA;MACR,CAAC,EACAC,KAAA,CAAOC,GAAA,IAAQ;QACfX,YAAA,OAAKZ,MAAA,EAAOwB,MAAA,CAAOb,QAAQ;QAC3B,MAAMY,GAAA;MACP,CAAC;IACH;IAEA,OAAOP,MAAA;EACR;EAEAS,SAAYhB,GAAA,EAA4BC,IAAA,EAAkB;IACzD,MAAMC,QAAA,GAAW,CAACC,YAAA,OAAKb,OAAA,GAAS,GAAGU,GAAG,EAAEI,IAAA,CAAK,GAAG;IAEhD,IAAID,YAAA,OAAKZ,MAAA,EAAOc,GAAA,CAAIH,QAAQ,GAAG;MAC9B,OAAOC,YAAA,OAAKZ,MAAA,EAAOe,GAAA,CAAIJ,QAAQ;IAChC;IAEA,MAAMK,MAAA,GAASN,IAAA,CAAK;IAEpBE,YAAA,OAAKZ,MAAA,EAAOiB,GAAA,CAAIN,QAAA,EAAUK,MAAM;IAEhC,OAAOA,MAAA;EACR;EAEAU,MAAMvB,MAAA,EAAmB;IACxB,MAAMwB,SAAA,GAAY,CAAC,GAAGf,YAAA,OAAKb,OAAA,GAAS,IAAII,MAAA,IAAU,EAAG,GAAEU,IAAA,CAAK,GAAG;IAC/D,IAAI,CAACc,SAAA,EAAW;MACff,YAAA,OAAKZ,MAAA,EAAO0B,KAAA,CAAM;MAClB;IACD;IAEA,WAAWjB,GAAA,IAAOG,YAAA,OAAKZ,MAAA,EAAO4B,IAAA,CAAK,GAAG;MACrC,IAAInB,GAAA,CAAIoB,UAAA,CAAWF,SAAS,GAAG;QAC9Bf,YAAA,OAAKZ,MAAA,EAAOwB,MAAA,CAAOf,GAAG;MACvB;IACD;EACD;EAEAqB,MAAM3B,MAAA,EAA2B;IAChC,OAAO,IAAIF,YAAA,CAAY;MACtBE,MAAA,EAAQ,CAAC,GAAGS,YAAA,OAAKb,OAAA,GAAS,IAAIgC,KAAA,CAAMC,OAAA,CAAQ7B,MAAM,IAAIA,MAAA,GAAS,CAACA,MAAM,CAAE;MACxEC,KAAA,EAAOQ,YAAA,OAAKZ,MAAA;IACb,CAAC;EACF;AACD;AApECD,OAAA,OAAAkC,OAAA;AACAjC,MAAA,OAAAiC,OAAA;AAFM,IAAMC,WAAA,GAANjC,YAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}