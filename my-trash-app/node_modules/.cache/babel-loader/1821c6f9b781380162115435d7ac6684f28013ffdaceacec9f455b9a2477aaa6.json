{"ast":null,"code":"function ulebEncode(num) {\n  let bigNum = BigInt(num);\n  const arr = [];\n  let len = 0;\n  if (bigNum === 0n) {\n    return [0];\n  }\n  while (bigNum > 0) {\n    arr[len] = Number(bigNum & 0x7fn);\n    bigNum >>= 7n;\n    if (bigNum > 0n) {\n      arr[len] |= 128;\n    }\n    len += 1;\n  }\n  return arr;\n}\nfunction ulebDecode(arr) {\n  let total = 0n;\n  let shift = 0n;\n  let len = 0;\n  while (true) {\n    if (len >= arr.length) {\n      throw new Error(\"ULEB decode error: buffer overflow\");\n    }\n    const byte = arr[len];\n    len += 1;\n    total += BigInt(byte & 127) << shift;\n    if ((byte & 128) === 0) {\n      break;\n    }\n    shift += 7n;\n  }\n  if (total > BigInt(Number.MAX_SAFE_INTEGER)) {\n    throw new Error(\"ULEB decode error: value exceeds MAX_SAFE_INTEGER\");\n  }\n  return {\n    value: Number(total),\n    length: len\n  };\n}\nexport { ulebDecode, ulebEncode };","map":{"version":3,"names":["ulebEncode","num","bigNum","BigInt","arr","len","Number","ulebDecode","total","shift","length","Error","byte","MAX_SAFE_INTEGER","value"],"sources":["/Users/joitafabian/Documents/Hackathon/my-trash-app/node_modules/@mysten/bcs/src/uleb.ts"],"sourcesContent":["// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\n// Helper utility: write number as an ULEB array.\n// Original code is taken from: https://www.npmjs.com/package/uleb128 (no longer exists)\nexport function ulebEncode(num: number | bigint): number[] {\n\tlet bigNum = BigInt(num);\n\tconst arr: number[] = [];\n\tlet len = 0;\n\n\tif (bigNum === 0n) {\n\t\treturn [0];\n\t}\n\n\twhile (bigNum > 0) {\n\t\tarr[len] = Number(bigNum & 0x7fn);\n\t\tbigNum >>= 7n;\n\t\tif (bigNum > 0n) {\n\t\t\tarr[len] |= 0x80;\n\t\t}\n\t\tlen += 1;\n\t}\n\n\treturn arr;\n}\n\n// Helper utility: decode ULEB as an array of numbers.\n// Original code is taken from: https://www.npmjs.com/package/uleb128 (no longer exists)\nexport function ulebDecode(arr: number[] | Uint8Array): {\n\tvalue: number;\n\tlength: number;\n} {\n\tlet total = 0n;\n\tlet shift = 0n;\n\tlet len = 0;\n\n\t// eslint-disable-next-line no-constant-condition\n\twhile (true) {\n\t\tif (len >= arr.length) {\n\t\t\tthrow new Error('ULEB decode error: buffer overflow');\n\t\t}\n\n\t\tconst byte = arr[len];\n\t\tlen += 1;\n\t\ttotal += BigInt(byte & 0x7f) << shift;\n\t\tif ((byte & 0x80) === 0) {\n\t\t\tbreak;\n\t\t}\n\t\tshift += 7n;\n\t}\n\n\t// TODO: return bigint in next major version\n\tif (total > BigInt(Number.MAX_SAFE_INTEGER)) {\n\t\tthrow new Error('ULEB decode error: value exceeds MAX_SAFE_INTEGER');\n\t}\n\n\treturn {\n\t\tvalue: Number(total),\n\t\tlength: len,\n\t};\n}\n"],"mappings":"AAKO,SAASA,WAAWC,GAAA,EAAgC;EAC1D,IAAIC,MAAA,GAASC,MAAA,CAAOF,GAAG;EACvB,MAAMG,GAAA,GAAgB,EAAC;EACvB,IAAIC,GAAA,GAAM;EAEV,IAAIH,MAAA,KAAW,IAAI;IAClB,OAAO,CAAC,CAAC;EACV;EAEA,OAAOA,MAAA,GAAS,GAAG;IAClBE,GAAA,CAAIC,GAAG,IAAIC,MAAA,CAAOJ,MAAA,GAAS,KAAK;IAChCA,MAAA,KAAW;IACX,IAAIA,MAAA,GAAS,IAAI;MAChBE,GAAA,CAAIC,GAAG,KAAK;IACb;IACAA,GAAA,IAAO;EACR;EAEA,OAAOD,GAAA;AACR;AAIO,SAASG,WAAWH,GAAA,EAGzB;EACD,IAAII,KAAA,GAAQ;EACZ,IAAIC,KAAA,GAAQ;EACZ,IAAIJ,GAAA,GAAM;EAGV,OAAO,MAAM;IACZ,IAAIA,GAAA,IAAOD,GAAA,CAAIM,MAAA,EAAQ;MACtB,MAAM,IAAIC,KAAA,CAAM,oCAAoC;IACrD;IAEA,MAAMC,IAAA,GAAOR,GAAA,CAAIC,GAAG;IACpBA,GAAA,IAAO;IACPG,KAAA,IAASL,MAAA,CAAOS,IAAA,GAAO,GAAI,KAAKH,KAAA;IAChC,KAAKG,IAAA,GAAO,SAAU,GAAG;MACxB;IACD;IACAH,KAAA,IAAS;EACV;EAGA,IAAID,KAAA,GAAQL,MAAA,CAAOG,MAAA,CAAOO,gBAAgB,GAAG;IAC5C,MAAM,IAAIF,KAAA,CAAM,mDAAmD;EACpE;EAEA,OAAO;IACNG,KAAA,EAAOR,MAAA,CAAOE,KAAK;IACnBE,MAAA,EAAQL;EACT;AACD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}